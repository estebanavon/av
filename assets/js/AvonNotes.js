var data1 = [
  [
    {
      title: 'Minifolleto Navidad Kids',
      file: 'MinifolletoNavidadKidsMx.pdf',
      type: 'flyer'
    }
  ],
  [
    {
      title: 'Minifolleto Navidad Kids',
      file: 'MinifolletoNavidadKidsMx.pdf',
      type: 'flyer'
    },
    {
      title: 'Belleza Mx',
      file: 'BellezaMx1_22.1.pdf',
      type: 'pd'
    }
  ]
]
var data2 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx2_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx2_22.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx2_22.pdf',
      type: 'pd'
    }
  ]
]
var data3 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx3_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx3_22.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx3_22.pdf',
      type: 'pd'
    }
  ]
]
var data4 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx4_22.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx4_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx4_22.pdf',
      type: 'pd'
    }
  ]
]
var data5 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx5_22.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx5_22.pdf',
      type: 'pd'
    }
  ]
]
var data6 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx6_22.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx6_22.pdf',
      type: 'pd'
    }
  ]
]
var data7 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx7_22.1.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx7_22.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx7_22.1.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx7_22.pdf',
      type: 'pd'
    }
  ]
]
var data8 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx8_22.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx8_22.pdf',
      type: 'pd'
    }
  ]
]
var data9 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx9_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx9_22.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx9_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx9_22.pdf',
      type: 'pd'
    }
  ]
]
var data10 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx10_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx10_22.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Contigo',
      file: 'avon_contigo_c1022.pdf',
      type: 'contigo'
    },
    {
      title: 'Grandes Oportunidades 2022',
      file: 'minifolletoGrandesOportunidades.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx10_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx10_22.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Contigo',
      file: 'avon_contigo_c1022_ncmwsx.pdf',
      type: 'contigo'
    }
  ]
]
var data11 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx11_22.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx11_22.pdf',
      type: 'pd'
    }
  ]
]
var data12 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx12_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx12_22.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Contigo',
      file: 'avon_contigo_c1222.pdf',
      type: 'contigo'
    },
    {
      title: 'Summer Sale',
      file: 'tripticoSummerSale.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Care Avena y Vainilla',
      file: 'ACAavenaVainilla.pdf',
      type: 'pd'
    },
    {
      title: 'Anew Especialista',
      file: 'dipticoAnewEspecialista.pdf',
      type: 'pd'
    },
    {
      title: 'Formato de salida Anew',
      file: 'formSalidaAnewPaqEntrenamiento.pdf',
      type: 'pd'
    },
    {
      title: 'Ofertas de Verano',
      file: 'MFOfertasDeVerano.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx12_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx12_22.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Contigo',
      file: 'avon_contigo_c1222_ncmwsx.pdf',
      type: 'contigo'
    },
    {
      title: 'Summer Sale',
      file: 'ofertasDeVeranoBerilio.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Care Avena y Vainilla',
      file: 'ACAavenaVainillaBerilio.pdf',
      type: 'pd'
    },
    {
      title: 'Ofertas de Verano',
      file: 'MFOfertasDeVerano.pdf',
      type: 'pd'
    }
  ]
]
var data13 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx13_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx13_22.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Contigo',
      file: 'avon_contigo_c1322.pdf',
      type: 'contigo'
    },
    {
      title: 'Bazar',
      file: 'bazarC13Mx.pdf',
      type: 'pd'
    },
    {
      title: 'Minifolleto Blancos',
      file: 'minifolletoBlancos3Q.pdf',
      type: 'pd'
    },
    {
      title: 'Attraction Game',
      file: 'dipticoAtractionNacional.pdf',
      type: 'pd'
    },
    {
      title: 'Ofertas Jugosas',
      file: 'ofertasJugosas.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx13_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx13_22.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Contigo',
      file: 'avon_contigo_c1322_ncmwsx.pdf',
      type: 'contigo'
    },
    {
      title: 'Bazar',
      file: 'bazarC13Mx.pdf',
      type: 'pd'
    },
    {
      title: 'Minifolleto Blancos',
      file: 'minifolletoBlancos3Q.pdf',
      type: 'pd'
    },
    {
      title: 'Attraction Game',
      file: 'dipticoAtraction.pdf',
      type: 'pd'
    },
    {
      title: 'Ofertas Jugosas',
      file: 'ofertasJugosasBerilio.pdf',
      type: 'pd'
    }
  ]
]
var data14 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx14_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx14_22.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Contigo',
      file: 'avon_contigo_c1422.pdf',
      type: 'contigo'
    },
    {
      title: 'Bazar',
      file: 'bazarC14Mx.pdf',
      type: 'pd'
    },
    {
      title: 'Combo Avon Care Litros',
      file: 'avonLitrosFlyer.pdf',
      type: 'pd'
    },
    {
      title: 'Super Ofertas c14-c15',
      file: 'avonSuperOfertasc14_c15.pdf',
      type: 'pd'
    },
    {
      title: 'VEA FÃ­sico Attraction Game',
      file: 'veaFisicoAttractionGame.pdf',
      type: 'pd'
    },
    {
      title: 'Minifolleto Blancos',
      file: 'minifolletoBlancos3Q.pdf',
      type: 'pd'
    },
    {
      title: 'Formato de salida Attraction Game',
      file: 'formatoSalida_c1422.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx14_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx14_22.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Contigo',
      file: 'avon_contigo_c1422_ncmwsx.pdf',
      type: 'contigo'
    },
    {
      title: 'Bazar',
      file: 'bazarC14Mx.pdf',
      type: 'pd'
    },
    {
      title: 'Combo Avon Care Litros',
      file: 'avonLitrosFlyerBerilio.pdf',
      type: 'pd'
    },
    {
      title: 'Super Ofertas c14-c15',
      file: 'avonSuperOfertasc14_c15ncmxjs.pdf',
      type: 'pd'
    },
    {
      title: 'Attraction Game',
      file: 'dipticoAtraction.pdf',
      type: 'pd'
    },
    {
      title: 'Minifolleto Blancos',
      file: 'minifolletoBlancos3Q.pdf',
      type: 'pd'
    }
  ]
]
var data15 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx15_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx15_22.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Contigo',
      file: 'avon_contigo_c1522.pdf',
      type: 'contigo'
    },
    {
      title: 'Combo Avon Care Litros',
      file: 'avonLitrosFlyer.pdf',
      type: 'pd'
    },
    {
      title: 'Super Ofertas c14-c15',
      file: 'avonSuperOfertasc14_c15.pdf',
      type: 'flyer'
    },
    {
      title: 'Minifolleto Blancos',
      file: 'minifolletoBlancos3Q.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx15_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home Mx',
      file: 'FashionNHomeMx15_22.pdf',
      type: 'pd'
    },
    {
      title: 'Avon Contigo',
      file: 'avon_contigo_c1522_ncmwsx.pdf',
      type: 'contigo'
    },
    {
      title: 'Minifolleto Blancos',
      file: 'minifolletoBlancos3Q.pdf',
      type: 'pd'
    },
    {
      title: 'Combo Avon Care Litros',
      file: 'avonLitrosFlyerBerilio.pdf',
      type: 'pd'
    },
    {
      title: 'Super Ofertas c14-c15',
      file: 'avonSuperOfertasc14_c15ncmxjs.pdf',
      type: 'pd'
    },
  ]
]
var data16 = [
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx16_22.pdf',
      type: 'pd'
    },
    {
        title: 'Fashion & Home',
        file: 'FashionNHomeMx16_22.pdf',
        type: 'pd'
    },
    {
        title: 'Flyer Anew Dual',
        file: 'flyerAnewDualRestage_22.pdf',
        type: 'pd'
    },
    {
      title: 'Formato de salida Anew Dual',
      file: 'formatoSalidaAnewDual.pdf',
      type: 'pd'
    },
    {
      title: 'Minifolletos Blancos 4Q',
      file: 'minifolletoBlancos4Q_22.pdf',
      type: 'pd'
    },
  ],
  [
    {
      title: 'Belleza Mx',
      file: 'BellezaMx16_22.pdf',
      type: 'pd'
    },
    {
      title: 'Fashion & Home',
      file: 'FashionNHomeMx16_22.pdf',
      type: 'pd'
    },
    {
      title: 'Flyer Anew Dual',
      file: 'flyerAnewDualRestage_22.pdf',
      type: 'pd'
    },
    {
        title: 'Minifolletos Blancos 4Q',
        file: 'minifolletoBlancos4Q_22.pdf',
        type: 'pd'
      },
  ]
]
var data17 = [
  [
    {
      title: 'Proximamente',
      file: '',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Proximamente',
      file: '',
      type: 'pd'
    }
  ]
]
var data18 = [
  [
    {
      title: 'Proximamente',
      file: '',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Proximamente',
      file: '',
      type: 'pd'
    }
  ]
]
var data19 = [
  [
    {
      title: 'Belleza',
      file: 'BellezaMx19.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Belleza',
      file: 'BellezaMx19.pdf',
      type: 'pd'
    }
  ]
]
var data20 = [
  [
    {
      title: 'Rostro 20 Mx',
      file: 'Rostro20Mx.pdf',
      type: 'pd'
    },
    {
      title: 'Belleza',
      file: 'BellezaMx20.pdf',
      type: 'pd'
    }
  ],
  [
    {
      title: 'Rostro 20 Mx',
      file: 'Rostro20Mx.pdf',
      type: 'pd'
    }
  ]
]

// const avMarket = 'mx';
// var site = 'ZMSuite'
// var d = '2710';
// var dm = '1'
// var c = '2022:C04';

//let avEnviorment = 'gi3-mx.qaf'
let avEnviorment = 'www.mx'
var c = AvonAnalyticsObjex.Profile.campaignInfo

const currentCampaign = parseInt(c.slice(6), 10)
const currentYear = c.slice(2, 4)

const avMarket = AvonAnalyticsObjex.Visitor.market

var site = AvonAnalyticsObjex.Content.siteID
var d = AvonAnalyticsObjex.Profile.zone
var dm = AvonAnalyticsObjex.Profile.repAcct

var avNcmFlag, brochuresWrapper, brochuresConstructor
avNcmFlag = 0

var NCMzone = [
  '2700',
  '2701',
  '2702',
  '2703',
  '2704',
  '2705',
  '2706',
  '2707',
  '2708',
  '2709',
  '2710'
]
if (NCMzone.includes(d) || dm == '888888827') {
  avNcmFlag = 1
}

var campaignData = ['', '', '', '', '']

campaignData[0] = currentCampaign - 2
campaignData[1] = currentCampaign - 1
campaignData[2] = currentCampaign
campaignData[3] = currentCampaign + 1
campaignData[4] = currentCampaign + 2

switch (currentCampaign) {
  case 19:
    campaignData[4] = 1
    break
  case 20:
    campaignData[4] = 2
    campaignData[3] = 1
    break
  case 1:
    campaignData[1] = 20
    campaignData[0] = 19
    break
  case 2:
    campaignData[0] = 20
    break
  default:
}

brochuresWrapper = [
  data1[avNcmFlag],
  data2[avNcmFlag],
  data3[avNcmFlag],
  data4[avNcmFlag],
  data5[avNcmFlag],
  data6[avNcmFlag],
  data7[avNcmFlag],
  data8[avNcmFlag],
  data9[avNcmFlag],
  data10[avNcmFlag],
  data11[avNcmFlag],
  data12[avNcmFlag],
  data13[avNcmFlag],
  data14[avNcmFlag],
  data15[avNcmFlag],
  data16[avNcmFlag],
  data17[avNcmFlag],
  data18[avNcmFlag],
  data19[avNcmFlag],
  data20[avNcmFlag]
]
var e = 0
brochuresConstructor = []
while (e < campaignData.length) {
  brochuresConstructor[e] = brochuresWrapper[campaignData[e] - 1]
  e++
}

var brochurePrint = ['', '', '', '', '', '', '', '', '', '', '']

let urlFilesLet, folder
let panoramaUrl = [[], [], [], [], []]
function urlFile (type, file, title, e) {
  urlFilesLet =
    'https://' +
    avEnviorment +
    '.avon.com/FLDSuite/static/pdf/mis_folletos/' +
    file
  switch (type) {
    case 'contigo':
      urlFilesLet =
        'https://' +
        avEnviorment +
        '.avon.com/FLDSuite/static/pdf/incentivos2019/' +
        file
      panoramaUrl[e].push({ url: urlFilesLet, title: title })
      break
    case 'pd':
      panoramaUrl[e].push({ url: urlFilesLet, title: title })
      break
  }
  return urlFilesLet
}

var canvasIdNumber, canvasID, _PDF_DOC

function pdfImg (type, canvasIdNumber, file) {
  let avCanvasLet
  if (type == 'youtube') {
    avCanvasLet = ''
  } else {
    avCanvasLet =
      '<div class="av-canvas-container"><canvas width="132" class="av-canvas" id="avCanvas' +
      canvasIdNumber +
      '"></canvas></div>'
    canvasID = '#avCanvas' + canvasIdNumber

    if (type == 'contigo') {
      folder = 'incentivos2019'
    } else {
      folder = 'mis_folletos'
    }
    showPDF(
      'https://' +
        avEnviorment +
        '.avon.com/FLDSuite/static/pdf/' +
        folder +
        '/' +
        file +
        '',
      canvasID
    )
  }

  return avCanvasLet
}

async function showPDF (pdf_url, canvasID) {
  try {
    _PDF_DOC = await pdfjsLib.getDocument({ url: pdf_url })
  } catch (error) {
    // alert(error.message);
  }
  showPage(canvasID)
}
async function showPage (canvasID) {
  try {
    var page = await _PDF_DOC.getPage(1)
  } catch (error) {
    // alert(error.message);
  }
  var pdf_original_width = page.getViewport(1).width
  var scale_required = 132 / pdf_original_width
  var viewport = page.getViewport(scale_required)
  var render_context = {
    canvasContext: document.querySelector(canvasID).getContext('2d'),
    viewport: viewport
  }
  try {
    await page.render(render_context)
  } catch (error) {
    alert(error.message)
  }
}

var i
e = 0
while (e < brochuresConstructor.length) {
  switch (e) {
    case 0:
    case 1:
    case 4:
      for (i = 0; i < brochuresConstructor[e].length; i++) {
        brochurePrint[e] +=
          '<li data-type="' +
          brochuresConstructor[e][i].type +
          '"><span class="av-type ' +
          brochuresConstructor[e][i].type +
          '"></span>' +
          '<span>' +
          brochuresConstructor[e][i].title +
          ' C' +
          campaignData[e] +
          '</span>' +
          '<span class="av-list-spacer"></span>' +
          '<div class="av-button-icon av-overlay" href="' +
          urlFile(
            brochuresConstructor[e][i].type,
            brochuresConstructor[e][i].file,
            brochuresConstructor[e][i].title,
            e
          ) +
          '">' +
          '<input type="text" class="av-hidden" value="' +
          urlFilesLet +
          '" /><span class="material-icons">visibility</span></div>' +
          '<div class="av-button-icon av-copys av-tooltip"><span class="material-icons">content_copy</span><div class="tooltiptext">Copiar link</div></div>' +
          '<a download class="av-button-icon" href="' +
          urlFilesLet +
          '" target="_blank"><span class="material-icons">file_download</span></a></li>'
      }
      break
    default:
      for (i = 0; i < brochuresConstructor[e].length; i++) {
        canvasIdNumber = campaignData[e] + '_' + i
        brochurePrint[e] +=
          '<div class="av-brochure-item">' +
          '<div class="av-brochure-image">' +
          pdfImg(
            brochuresConstructor[e][i].type,
            canvasIdNumber,
            brochuresConstructor[e][i].file
          ) +
          '<a download href="' +
          urlFile(
            brochuresConstructor[e][i].type,
            brochuresConstructor[e][i].file,
            brochuresConstructor[e][i].title,
            e
          ) +
          '" class="av-download" style="text-decoration:none;" target="_blank"><span class="material-icons">file_download</span></a>' +
          '<div class="av-overlay"><input type="text" class="av-hidden" value="' +
          urlFilesLet +
          '" />' +
          '<p class="material-icons">visibility</p><p>Ver</p></div><div class="av-copys av-tooltip"><span class="material-icons">content_copy</span><div class="tooltiptext">Copiar link</div></div>' +
          '<div class="av-type imb">' +
          campaignData[e] +
          '</div>' +
          '</div>' +
          '<div class="av-brochure-text"><h3 class="av-brochure-title">' +
          brochuresConstructor[e][i].title +
          '</h3></div>' +
          '</div>'
      }
  }
  e++
}

let vendorlink
switch (site) {
  case 'REPSuite':
    vendorlink =
      '<div><a target="_blank" href="/REPSuite/vendorLinksOne.page?linkid=42"><i class="far fa-bookmark mr-3"></i>Mi tablero de control</a></div>'
    break
  case 'SLSuite':
    vendorlink =
      '<div><a target="_blank" href="/SLSuite/vendorLinksOne.page?linkid=45"><i class="far fa-bookmark mr-3"></i>Mi tablero de control</a></div>'
    break
  default:
    vendorlink = ''
}
var html =
  '<div id="avOverlay" class="av-modal" style="display: none;">' +
  '<div class="av-modal-background avClose"></div><div style="z-index: 9999;"><div class="av-modal-content"><div class="av-modal-close avClose">â</div><iframe id="contentLoad" style="width: 90vw;height:80vh;"></iframe></div></div></div>' +
  '<section class="av-br-grid"><div><img src="/FLDSuite/static/images/mis_folletos/PanoramaDigital.png" class="mb-3 mt-3 av-br" style="width: 150px;" /><div class="brochure-tab av-br" id="avVendor">' +
  '<div><a href="/' +
  site +
  '/beautyArticles.page"><i class="far fa-bookmark mr-3"></i>Avon On</a></div><hr class="my-2"></div><div class="brochure-tab" id="panoramaTabs">' +
  '<div value="0">C<span class="av-br">ampaÃ±a</span> </div><div value="1">C<span class="av-br">ampaÃ±a</span> </div><div value="2" class="active">C<span class="av-br">ampaÃ±a</span> </div>' +
  '<div value="3">C<span class="av-br">ampaÃ±a</span> </div><div value="4">C<span class="av-br">ampaÃ±a</span> </div></div>' +
  '<div class="brochure-tab av-br"><hr class="my-2"><div><a target="_blank" href="https://www.facebook.com/"><i class="fab fa-facebook-f mr-3"></i>Facebook</a></div>' +
  '<div><a target="_blank" href="https://api.whatsapp.com/send?text=Este%20es%20mi%20Cat%C3%A1logo%20para%20ti"><i class="fab fa-whatsapp mr-3"></i>Whats App</a></div>' +
  '<div><a target="_blank" href="subject=Este%20es%20mi%20CatÃ¡logo%20para%20ti"><i class="far fa-envelope mr-3"></i>Email</a></div></div></div><aside><div style="justify-content:space-between;" class="av-br-banner mb-4">' +
  '<h2 class="av-brochure-title" style="color:#fff;">MI PANORAMA<br /><span class="av-title-stroke">DIGITAL</span> C<span class="campaignText"></span></h2><p class="av-text negative text-right mb-0">Descarga todo el Panorama Digital de C<span class="campaignText"></span></p>' +
  '<button id="zipDownload" value="2" class="av-brochure-button">' +
  '<span class="material-icons">file_download</span></button></div><div id="avBrochureContainer">' +
  '<div class="av-brochures-container d-none"><ul class="av-list av-list-item w-100"></ul></div><div class="av-brochures-container d-none"><ul class="av-list av-list-item w-100"></ul></div><div class="av-brochures-container d-none av-brochure-show"></div>' +
  '<div class="av-brochures-container d-none"></div><div class="av-brochures-container d-none"><ul class="av-list av-list-item w-100"></ul></div></div></aside></section>'

$(document).ready(function () {
  $('#avContainer').append(html)
  for (i = 0; i < 5; i++) {
    switch (i) {
      case 0:
      case 1:
      case 4:
        $('#avBrochureContainer')
          .children()
          .eq(i)
          .children()
          .eq(0)
          .prepend(brochurePrint[i])
        break
      default:
        $('#avBrochureContainer')
          .children()
          .eq(i)
          .prepend(brochurePrint[i])
    }
    $('#panoramaTabs')
      .children()
      .eq(i)
      .append(campaignData[i])
  }

  $('#avVendor').prepend(vendorlink)
  $('.campaignText').text(currentCampaign)
  let val = 2
  $('#panoramaTabs')
    .children()
    .click(function () {
      val = parseInt($(this).attr('value'), 10)
      $(this)
        .addClass('active')
        .siblings()
        .removeClass('active')
      $('#avBrochureContainer')
        .children()
        .eq(val)
        .addClass('av-brochure-show')
        .siblings()
        .removeClass('av-brochure-show')
      $('.campaignText').text(campaignData[val])
      $('#zipDownload').attr('value', val)
    })

  function avCopy () {
    $('.av-copys').click(function () {
      $(this)
        .prev()
        .children()
        .eq(0)
        .select()
      document.execCommand('copy')
      $(this)
        .find('.tooltiptext')
        .text('Â¡Copiado al portapapeles!')
      $(this).mouseleave(function () {
        $(this)
          .find('.tooltiptext')
          .text('Copiar link')
      })
    })
  }
  avCopy()

  $('.av-modal-content').css('backgroundColor', 'transparent')

  $('.av-overlay').click(function () {
    $('#avOverlay').show()
    var docURL = $(this)
      .children()
      .eq(0)
      .attr('value')
    $('#contentLoad').attr('src', docURL)
    if (docURL.search('youtube') != -1) {
      $('.av-modal-content')
        .children()
        .eq(1)
        .remove()
      $('#avOverlay').hide()
      window.open(docURL)
    }
  })

  $('.avClose').click(function () {
    $('#avOverlay').hide()
    $('#contentLoad').attr('src', '')
  })

  var widthView = $(window).width()
  if (widthView <= 500) {
    $('body').append(
      '<div class="av-panorama-header"><div class="w-100 d-flex justify-content-between align-items-center">' +
        '<a href="javascript:callMe(\'home.page\')" style="color:#000;"><span class="material-icons">home</span></a>' +
        '<span class="av-ca-brand"><img width="100px" src="/REPSuite/static/images/empty.gif" />' +
        '</span><span class="material-icons"></span></div></div>'
    )
    var finder = $('.border')
      .find('tr.topbackgroundcolor')
      .parent()
      .children()
    finder.eq(0).remove()
    finder.eq(1).remove()
    finder.eq(3).remove()
  }

  var zip = new JSZip()
  $('#zipDownload').click(function () {
    // var img = zip.folder("images");
    //img.file("smile.gif", imgData, {base64: true});
    zip.generateAsync({ type: 'blob' }).then(function (content) {
      for (i = 0; i < panoramaUrl[val].length; i++) {
        saveAs(
          panoramaUrl[val][i].url,
          'Panorama_Digital_' + panoramaUrl[val][i].title + '.pdf'
        )
      }
    })
  })
})
